<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</title>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Arial,sans-serif;
  background:#f2f2f2;
}
.container{
  max-width:420px;
  margin:30px auto;
  background:#fff;
  padding:16px;
  border-radius:12px;
  box-shadow:0 4px 12px rgba(0,0,0,.2);
}
.hidden{display:none}
button{
  width:100%;
  padding:12px;
  margin-top:8px;
  border:none;
  border-radius:8px;
  background:#2b7cff;
  color:#fff;
  font-size:16px;
}
input,select{
  width:100%;
  padding:10px;
  margin-top:6px;
  border-radius:6px;
  border:1px solid #ccc;
}
.menu{
  border:1px solid #ddd;
  border-radius:8px;
  padding:8px;
  margin-top:10px;
  text-align:center;
}
.menu img{
  width:100%;
  height:100px;
  object-fit:cover;
  border-radius:6px;
}
</style>
</head>

<body>

<!-- ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å -->
<div class="container" id="home">
<h2>üçΩÔ∏è ‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h2>
<button onclick="show('login')">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
<button onclick="show('register')">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
</div>

<!-- ‡∏™‡∏°‡∏±‡∏Ñ‡∏£ -->
<div class="container hidden" id="register">
<h3>‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h3>
<select id="regRole">
<option value="student">‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</option>
<option value="seller">‡∏Ñ‡∏ô‡∏Ç‡∏≤‡∏¢</option>
</select>
<input id="regUser" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 10 ‡∏ï‡∏±‡∏ß)">
<input id="regPass" type="password" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 10 ‡∏ï‡∏±‡∏ß)">
<button onclick="register()">‡∏™‡∏°‡∏±‡∏Ñ‡∏£</button>
<button onclick="show('home')">‡∏Å‡∏•‡∏±‡∏ö</button>
</div>

<!-- ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö -->
<div class="container hidden" id="login">
<h3>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h3>
<input id="loginUser" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ">
<input id="loginPass" type="password" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
<button onclick="login()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
<button onclick="show('home')">‡∏Å‡∏•‡∏±‡∏ö</button>
</div>

<!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≤‡∏ô -->
<div class="container hidden" id="shop">
<h3 id="roleTitle"></h3>

<p id="noMenuMsg" style="text-align:center;color:#888"></p>
<div id="menuList"></div>

<!-- ‡∏Ñ‡∏ô‡∏Ç‡∏≤‡∏¢ -->
<div id="sellerPanel" class="hidden">
<hr>
<h4>‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h4>
<input type="file" id="foodImg">
<input id="foodName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏´‡∏≤‡∏£">
<input id="foodPrice" type="number" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤">
<button onclick="addMenu()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π</button>
</div>

<button onclick="logout()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
</div>

<script>
let currentRole = "";
let menus = JSON.parse(localStorage.getItem("menus") || "[]");

function show(id){
  document.querySelectorAll(".container").forEach(d=>d.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
}

/* ‡∏™‡∏°‡∏±‡∏Ñ‡∏£ */
function register(){
  const user = regUser.value.trim();
  const pass = regPass.value.trim();
  const role = regRole.value;

  if(user.length < 10 || pass.length < 10){
    alert("‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡∏∞‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 10 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£");
    return;
  }

  localStorage.setItem("account", JSON.stringify({user,pass,role}));
  alert("‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
  show("login");
}

/* ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö */
function login(){
  const acc = JSON.parse(localStorage.getItem("account") || "{}");
  if(loginUser.value !== acc.user || loginPass.value !== acc.pass){
    alert("‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
    show("home");
    return;
  }

  currentRole = acc.role;
  roleTitle.textContent = currentRole === "seller" ? "üßë‚Äçüç≥ ‡∏Ñ‡∏ô‡∏Ç‡∏≤‡∏¢" : "üéì ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô";
  show("shop");
  renderMenus();

  if(currentRole === "seller"){
    sellerPanel.classList.remove("hidden");
  }
}

/* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π (‡∏Ñ‡∏ô‡∏Ç‡∏≤‡∏¢) */
function addMenu(){
  if(!foodImg.files[0] || !foodName.value || !foodPrice.value){
    alert("‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");
    return;
  }

  const reader = new FileReader();
  reader.onload = e=>{
    menus.push({
      name: foodName.value,
      price: foodPrice.value,
      img: e.target.result
    });
    localStorage.setItem("menus", JSON.stringify(menus));
    renderMenus();
    foodName.value="";
    foodPrice.value="";
  };
  reader.readAsDataURL(foodImg.files[0]);
}

/* ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏°‡∏ô‡∏π */
function renderMenus(){
  menuList.innerHTML="";
  if(menus.length === 0){
    noMenuMsg.textContent="‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏à‡∏≤‡∏Å‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤";
    return;
  }

  noMenuMsg.textContent="";
  menus.forEach(m=>{
    const div=document.createElement("div");
    div.className="menu";
    div.innerHTML=`
      <img src="${m.img}">
      <h4>${m.name}</h4>
      <b>${m.price} ‡∏ö‡∏≤‡∏ó</b>
    `;
    menuList.appendChild(div);
  });
}

function logout(){
  show("home");
}
</script>

</body>
</html>
