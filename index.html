<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</title>

<style>
body{margin:0;font-family:Arial;background:#f2f2f2}
.container{max-width:420px;margin:30px auto;background:#fff;padding:16px;border-radius:12px}
.hidden{display:none}
button{width:100%;padding:12px;margin-top:8px;border:none;border-radius:8px;background:#2b7cff;color:#fff}
input,select{width:100%;padding:10px;margin-top:6px}
.menu{border:1px solid #ddd;padding:8px;border-radius:8px;margin-top:10px;text-align:center}
.menu img{width:100%;height:100px;object-fit:cover;border-radius:6px}
</style>
</head>

<body>

<div class="container" id="home">
<h2>üçΩÔ∏è ‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h2>
<button onclick="show('login')">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
<button onclick="show('register')">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
</div>

<div class="container hidden" id="register">
<h3>‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h3>
<select id="regRole">
<option value="student">‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</option>
<option value="seller">‡∏Ñ‡∏ô‡∏Ç‡∏≤‡∏¢</option>
</select>
<input id="regUser" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (‚â•10 ‡∏ï‡∏±‡∏ß)">
<input id="regPass" type="password" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (‚â•10 ‡∏ï‡∏±‡∏ß)">
<button onclick="register()">‡∏™‡∏°‡∏±‡∏Ñ‡∏£</button>
<button onclick="show('home')">‡∏Å‡∏•‡∏±‡∏ö</button>
</div>

<div class="container hidden" id="login">
<h3>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h3>
<input id="loginUser" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ">
<input id="loginPass" type="password" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
<button onclick="login()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
<button onclick="show('home')">‡∏Å‡∏•‡∏±‡∏ö</button>
</div>

<div class="container hidden" id="shop">
<h3 id="roleTitle"></h3>
<p id="noMenu" style="text-align:center;color:#888"></p>
<div id="menuList"></div>

<div id="sellerPanel" class="hidden">
<hr>
<h4>‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π</h4>
<input type="file" id="foodImg">
<input id="foodName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏´‡∏≤‡∏£">
<input id="foodPrice" type="number" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤">
<button onclick="addMenu()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π</button>
</div>

<button onclick="logout()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
</div>

<script>
let menus = JSON.parse(localStorage.getItem("menus")||"[]");
let account = JSON.parse(localStorage.getItem("account")||"{}");
let role = "";

function show(id){
  document.querySelectorAll('.container').forEach(d=>d.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}

function register(){
  if(regUser.value.length<10 || regPass.value.length<10){
    alert("‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 10 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£");
    return;
  }
  localStorage.setItem("account",JSON.stringify({
    user:regUser.value,
    pass:regPass.value,
    role:regRole.value
  }));
  alert("‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
  show("login");
}

function login(){
  if(loginUser.value!==account.user || loginPass.value!==account.pass){
    alert("‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
    show("home");
    return;
  }
  role = account.role;
  roleTitle.textContent = role==="seller"?"üßë‚Äçüç≥ ‡∏Ñ‡∏ô‡∏Ç‡∏≤‡∏¢":"üéì ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô";
  show("shop");
  renderMenus();
  if(role==="seller") sellerPanel.classList.remove("hidden");
}

function addMenu(){
  if(!foodImg.files[0]||!foodName.value||!foodPrice.value){
    alert("‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö"); return;
  }
  const r=new FileReader();
  r.onload=e=>{
    menus.push({name:foodName.value,price:foodPrice.value,img:e.target.result});
    localStorage.setItem("menus",JSON.stringify(menus));
    renderMenus();
  };
  r.readAsDataURL(foodImg.files[0]);
}

function renderMenus(){
  menuList.innerHTML="";
  if(menus.length===0){
    noMenu.textContent="‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏°‡∏ô‡∏π‡∏à‡∏≤‡∏Å‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤";
    return;
  }
  noMenu.textContent="";
  menus.forEach(m=>{
    menuList.innerHTML+=`
      <div class="menu">
        <img src="${m.img}">
        <b>${m.name}</b><br>${m.price} ‡∏ö‡∏≤‡∏ó
      </div>`;
  });
}

function logout(){ show("home"); }
</script>

</body>
</html>
